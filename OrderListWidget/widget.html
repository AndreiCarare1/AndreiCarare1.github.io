<!DOCTYPE html>
<html>
<head>
<script src="//js.jotform.com/JotFormCustomWidget.min.js"></script>
<style>
            .item {
                border: 1px solid #ddd;
                padding: 10px;
                margin-bottom: 10px;
            }
            .item-image {
                max-width: 100px;
                max-height: 100px;
                margin-right: 10px;
            }
            .item-text {
                display: inline-block;
                vertical-align: top;
            }
</style>
</head>
<body>
<div id="main">
<h3>This is my first widget.</h3>
<div id="itemList"></div>
</div>
<script type="text/javascript">
            JFCustomWidget.subscribe("ready", function(){
                var items = JSON.parse(JFCustomWidget.getWidgetSetting('items') || '[]');
                var itemList = document.getElementById('itemList');
                items.forEach(function(item, index) {
                    // Create item container
                    var div = document.createElement('div');
                    div.className = 'item';
                    div.id = 'item-' + index;
 
                    // Add image
                    var img = document.createElement('img');
                    img.src = item.picture;
                    img.className = 'item-image';
                    div.appendChild(img);
 
                    // Add text
                    var span = document.createElement('span');
                    span.className = 'item-text';
                    span.innerHTML = item.text;
                    div.appendChild(span);
 
                    // Add number input
                    var input = document.createElement('input');
                    input.type = 'number';
                    input.id = 'number-' + index;
                    input.className = 'item-input';
                    input.setAttribute('min', '0'); // Set minimum value if necessary
                    div.appendChild(input);
 
                    // Append item to the list
                    itemList.appendChild(div);
                });
 
                // Subscribe to form submit event
                JFCustomWidget.subscribe("submit", function(){
                    var selectedItems = [];
                    items.forEach(function(item, index) {
                        var input = document.getElementById('number-' + index);
                        var quantity = input.value;
                        if (quantity > 0) {
                            selectedItems.push({
                                item: item.text,
                                quantity: quantity
                            });
                        }
                    });
                    var msg = {
                        valid: true,
                        value: JSON.stringify(selectedItems)
                    }
                    JFCustomWidget.sendSubmit(msg);
                });
            });
</script>
</body>
</html>
